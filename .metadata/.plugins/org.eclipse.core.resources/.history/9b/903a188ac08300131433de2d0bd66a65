var cWindow = Ti.UI.currentWindow;



//Window Views
var categoryView = Ti.UI.createView({
	height: Ti.UI.setHeight,
	top:0,
	width: Ti.UI.setWidth,
	backgroundColor: '#fff'
});


Ti.include('movie_json.js');

//Table
var movieTable = Ti.UI.createTableView({
	style: Ti.UI.iPhone.TableViewStyle.PLAIN,
	headerTitle:"Released",
	title: {fontSize: 22, fontFamily: "Helvetica"},
	height: 275,
	top: 20,
	width: Ti.UI.setWidth,
	borderColor: "black"
});

	//Table Info
var theMovie = [];

for (var n in movieData) {
	var movietableSec = Ti.UI.createTableViewSection ({
		
	});
		for(var i = 0, j = movieData[n].movieRow.length; i<j; i++){
			var movieRows = Ti.UI.createTableViewRow({
				title: movieData[n].movieRow[i].title,
				rating: movieData[n].movieRow[i].rating,
				score: movieData[n].movieRow[i].score,
				moviePic: movieData[n].movieRow[i].moviePic,
				bannerPic: movieData[n].movieRow[i].bannerPic,
				studio: movieData[n].movieRow[i].studio, 
				release: movieData[n].movieRow[i].release,
				synopsis: movieData[n].movieRow[i].synopsis,											
				font: {fontSize: 14, fontFamily: "Arial"}
			});
			movietableSec.add(movieRows);
	};
	theMovie.push(movietableSec);
}


//Info/Pic/Stats
movieTable.addEventListener("click", function(movieEvent){
	var movieWin = Ti.UI.createWindow({
		title: movieEvent.source.title,
		font: {fontSize: 18, fontFamily: "Helvetica"},
		backgroundColor: "#252525"
	});
	
	var bannerImage = Ti.UI.createImageView({
		image: movieEvent.source.bannerPic,
		height:200,
		width: 150, 
		top: 20,
		left: 10
	});
	
	var posterImage = Ti.UI.createImageView({
		image: movieEvent.source.moviePic,
		height:200,
		width: 150, 
		top: 20,
		left: 10
	});
		
	var infoView = Ti.UI.createView({
		backgroundColor: "#f3f3f3",
		opacity: .7,
		borderRadius: 5,
		height: 200,
		width: 140,
		top: 20,
		right: 15
	});
	
	var mRating = Ti.UI.createLabel({
		text: movieEvent.source.rating,
		font: {fontSize: 12, fontFamily: "Helvetica"},
		backgroundColor: "#f3f3f3",
		borderRadius: 5,
		height: Ti.UI.SIZE,
		bottom: 100
	});	
	
	var score10 = Ti.UI.createLabel({
		text: movieEvent.source.score,
		font: {fontSize: 14, fontFamily: "Helvetica", fontWeight: "bold", fontColor: "#000"},
		top:10,
		left: 5
	});	

	var studioMake = Ti.UI.createLabel({
		text: movieEvent.source.studio,
		font: {fontSize: 14, fontFamily: "Helvetica", fontWeight: "bold", fontColor: "#000"},
		center: 0,
		left: 5
	});		
			
	var releaseDate = Ti.UI.createLabel({
		text: movieEvent.source.release,
		font: {fontSize: 14, fontFamily: "Helvetica", fontWeight: "bold", fontColor: "#000"},
		center: 0,
		left: 5
	});		
	
	var synopsisView = Ti.UI.createView({
		backgroundColor: "#f3f3f3",
		opacity: .7,
		borderRadius: 5,
		height: 200,
		width: 140,
		top: 20,
		right: 15
	});

	var synopsisInfo = Ti.UI.createLabel({
		text: movieEvent.source.synopsis,
		font: {fontSize: 14, fontFamily: "Helvetica", fontWeight: "bold", fontColor: "#000"},
		bottom: 10,
		left: 5		
	});
	synopsisView.add(synopsisInfo);
	infoView.add(releaseDate, studioMake, score10, mRating);
	movieWin.add(infoView, posterImage, bannerImage, synopsisView);
	cWindow.nav.openWindow(movieWin, {animate: true});
});
//Table End


cWindow.add(categoryView);
